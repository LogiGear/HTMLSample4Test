/*
	UIZE JAVASCRIPT FRAMEWORK

	http://www.uize.com/reference/Uize.Build.FileBuilders.BuiltLibraryModules.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Build.FileBuilders.BuiltLibraryModules',required:['Uize.String','Uize.String.Lines','Uize.Build.Util','Uize.Url'],builder:function(){var _a=/\/\*\s*Library\s*Contents/i,_b=/^[a-zA-Z_$]/,_c='/*______________\n'+'|       ______  |   B U I L T     O N     U I Z E     F R A M E W O R K\n'+'|     /      /  |   ---------------------------------------------------\n'+'|    /    O /   |   This JavaScript application is developed using the object\n'+'|   /    / /    |   oriented UIZE JavaScript framework as its foundation.\n'+'|  /    / /  /| |\n'+'| /____/ /__/_| |    ONLINE : http://www.uize.com\n'+'|          /___ |   LICENSE : Available under MIT License or GNU General Public License\n'+'|_______________|             http://www.uize.com/license.html\n'+'*/\n\n';return{description:'JavaScript library modules',urlMatcher:function(_d){var _e=_d.pathname;return(!this.params.isDev&&Uize.String.startsWith(_e,this.builtUrl(this.params.modulesFolder+'/'))&&Uize.String.endsWith(_e,'.library.js'));},
builderInputs:function(_d){var _f=this,_e=_d.pathname,_g=_f.sourceUrlFromBuiltUrl(_e),_h=_f.readFile({path:_g}),_i=_h.search(_a),_j=_h.indexOf('*/',_i),_k=[],_l=0;Uize.String.Lines.forEach(_i> -1?_h.slice(_i,_j).replace(_a,''):_h,function(_m){if((_m=Uize.String.trim(_m))&&_b.test(_m))_k[_l++]=_f.builtUrl(_f.getModuleUrl(_m));});return{librarySource:_g,modules:_k};},builder:function(_n){function _o(_p){var _q=_p.indexOf('/*');return(_q> -1?(_p.slice(0,_q)+_p.slice(_p.indexOf('*/',_q+2)+2)):_p);}var _f=this,_h=_f.readFile({path:_n.librarySource}),_i=_h.search(_a),_j=_h.indexOf('*/',_i),_r,_s=Uize.map(_n.modules,function(_t){if(!_r)_r=Uize.String.startsWith(Uize.Url.from(_t).fileName,'Uize');return _o(_f.readFile({path:_t}));});return((_r?_c:'')+_h.slice(0,_i)+_s.join('\n')+_h.slice(_j+2));}};}});