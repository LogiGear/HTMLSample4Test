/*
	UIZE JAVASCRIPT FRAMEWORK

	http://www.uize.com/reference/Uize.Widget.Swap.Image.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.Swap.Image',required:'Uize.Node',builder:function(d_a){'use strict';var d_b=Uize.Node;function d_c(){var d_d=this;if(d_d.isWired){var d_e=d_d.getNode('item'+d_d.d_f),d_g=1-d_d.d_f,d_h=d_d.getNode('item'+d_g),d_i=d_d.getNode('item'+d_g+'Image');d_h.style.padding='0px';d_d.prepareForNextItem(d_e,d_h);var d_j=function(){var d_k=d_d.d_l[d_d.d_m];d_b.setStyle(d_h,{paddingLeft:(d_d.viewFinalCoords[2]+1-d_k.d_n)/2,paddingTop:(d_d.viewFinalCoords[3]+1-d_k.d_o)/2});function d_p(){d_i.Uize_Widget_ImageSwap_src=d_d.d_m;d_d.unwireNode(d_i);d_d.d_f=d_g;d_d.setCurrentItem(d_h);}if(d_i.Uize_Widget_ImageSwap_src===d_d.d_m){d_p();}else{d_d.wireNode(d_i,{load:d_p,error:d_p,abort:d_p});if(d_b.isIe&&/\.png$/i.test(d_d.d_m)){d_i.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\''+d_d.d_m+'\', sizingMethod=\'crop\')';d_i.src=d_d.Class.getBlankImageUrl();}else{d_i.src=d_d.d_m;d_i.style.filter=null;}d_i.width=d_k.d_n;d_i.height=d_k.d_o;}};if(d_d.d_l[d_d.d_m]){d_j();}else{
var d_q=new Image;d_q.onload=d_q.onerror=d_q.onabort=function(){d_q=null;d_d.d_l[d_d.d_m]={d_n:d_d.d_n||this.width,d_o:d_d.d_o||this.height};d_j();};d_q.src=d_d.d_m;}}}return d_a.subclass({alphastructor:function(){var d_d=this;d_d.d_f=0;d_d.d_l={};},instanceMethods:{updateUi:function(){d_c.call(this);}},stateProperties:{d_r:'background',d_o:'height',d_m:{name:'src|value',onChange:d_c,value:''},d_n:'width'},set:{html:{process:function(input){var d_d=this,d_s=this.getNode(),d_t=d_b.getDimensions(d_s),d_r=input.background||d_b.Util.getEffectiveBgColor(d_s);function d_u(d_v){return('<div id="'+input.idPrefix+'-item'+d_v+'" style="position:absolute; margin:0px; padding:0px; left:0px; top:0px; width:'+d_t.width+'px; height:'+d_t.height+'px; background:'+d_r+'; overflow:hidden;"><img id="'+input.idPrefix+'-item'+d_v+'Image" src="'+d_d.Class.getBlankImageUrl()+'"'+(typeof input.width=='number'?(' width="'+input.width+'"'):'')+(typeof input.height=='number'?(' height="'+input.height+'"'):'')+'/></div>');}
return d_u(0)+d_u(1);}}}});}});