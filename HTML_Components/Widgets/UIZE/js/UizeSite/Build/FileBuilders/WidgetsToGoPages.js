/*
	UIZE Web Site

	http://www.uize.com/reference/UizeSite.Build.FileBuilders.WidgetsToGoPages.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'UizeSite.Build.FileBuilders.WidgetsToGoPages',required:['Uize.Data.Matches','Uize.String'],builder:function(){var _a='widgets/',_b=/^([^\\\/]+)[\\\/]([^\\\/]+)[\\\/]([^\\\/]+)[\\\/][^\\\/]+$/;function _c(_d){return _d.title.toLowerCase().replace(/\s+/g,'-');}return[{description:'Widgets To Go index page',urlMatcher:function(_e){return _e.pathname==this.builtUrl('javascript-widgets.html');},builderInputs:function(_e){return{template:this.memoryUrlFromBuiltUrl(_e.pathname)+'.jst',widgets:this.memoryUrl(_a+'widgets.simpledata')};},builder:function(_f){return this.readFile({path:_f.template})({files:Uize.map(this.readFile({path:_f.widgets}).widgets,function(_d){var _g=_c(_d);return{title:_d.title,path:_a+_g+'.html',imageSrc:'images/widgets/'+_g+'-96x96.gif',description:_d.description.short};})});}},{description:'Widget homepages',urlMatcher:function(_e){return(_e.fileType=='html'&&_e.folderPath==this.builtUrl(_a));},builderInputs:function(_e){var _h=this.memoryUrl(_a);return{
template:_h+'homepage.html.jst',widgets:_h+'widgets.simpledata'};},builder:function(_f,_e){var _g=_e.fileName;return this.readFile({path:_f.template})(Uize.Data.Matches.firstValue(this.readFile({path:_f.widgets}).widgets,function(_d){return _g==_c(_d)}));}},{description:'Widget IFRAME pages',urlMatcher:function(_e){return(_e.fileType=='html'&&Uize.String.startsWith(_e.folderPath,this.builtUrl(_a))&&(_e.fileName=='web'||_e.fileName=='mobile')&&_b.test(_e.pathname));},builderInputs:function(_e){var _h=this.memoryUrl(_a);return{template:_h+'widget.html.jst',widgets:_h+'widgets.simpledata'};},builder:function(_f,_e){var _g=_e.pathname.match(_b)[3];return this.readFile({path:_f.template})({widget:Uize.Data.Matches.firstValue(this.readFile({path:_f.widgets}).widgets,function(_d){return _g==_c(_d)}),mobile:_e.fileName=='mobile'});}},{description:'Widget Google Gadget XML pages',urlMatcher:function(_e){return(_e.file=='gadget.xml'&&Uize.String.startsWith(_e.folderPath,this.builtUrl(_a))&&_b.test(_e.pathname));},
builderInputs:function(_e){var _h=this.memoryUrl(_a);return{template:_h+'gadget.xml.jst',widgets:_h+'widgets.simpledata'};},builder:function(_f,_e){var _g=_e.pathname.match(_b)[3];return this.readFile({path:_f.template})(Uize.Data.Matches.firstValue(this.readFile({path:_f.widgets}).widgets,function(_d){return _g==_c(_d)}));}}];}});