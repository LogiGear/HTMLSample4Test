/*
	UIZE JAVASCRIPT FRAMEWORK

	http://www.uize.com/reference/Uize.Widget.Bar.Slider.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.Bar.Slider',required:['Uize.Node','Uize.Widget.Drag'],builder:function(e_a){'use strict';var e_b=true,e_c=false,e_d=Uize.Node,e_e=Uize.Widget.Drag;var e_f=e_a.subclass(),e_g=e_f.prototype;e_g.e_h=function(){this.e_i=null;this.fire('Value Change After Rest');};e_g.e_j=function(e_k){var e_l=this,e_m= +e_l;e_l.set({value:e_k});if(+e_l!=e_m){if(e_l.isWired&&e_l.children.drag.get('inDrag')){if(e_l.e_i)clearTimeout(e_l.e_i);e_l.e_i=setTimeout(function(){e_l.e_h()},e_l.e_n);}else{e_l.e_h();}}};e_g.wireUi=function(){var e_l=this;if(!e_l.isWired){var e_o=e_l.getNode('track'),e_p=e_l.getNode('knob'),e_q,e_r,e_s,e_t,e_u,e_v=e_l.get('scaleFunc'),e_w=e_l.get('valueFunc'),e_x=function(){e_q=e_l.get('orientation')=='vertical'?1:0;e_r=e_d.getDimensions(e_o);e_s=[e_r.width,e_r.height];e_t=e_d.getDimensions(e_p);e_u=[e_t.width,e_t.height];},e_y=function(e_z){var e_A=e_v(e_l.get('maxValue')),e_B=e_v(e_l.get('minValue'));return(e_z*(1-e_q*2)*(e_A-e_B)/(e_s[e_q]-e_u[e_q]));};var
 e_C=e_l.addChild('drag',e_e,{node:e_p}),e_D;e_C.wire({'Drag Start':function(){e_l.set({e_E:e_b});e_x();e_D= +e_l;},'Drag Update':function(){e_l.e_j(e_w(e_v(e_D)+e_y([e_C.eventDeltaPos[0],e_C.eventDeltaPos[1]][e_q])));},'Drag Done':function(){e_l.set({e_E:e_c});clearTimeout(e_l.e_i);e_l.e_i=null;e_l.e_h();}});var e_F=function(e_G){if(e_l.get('enabledInherited')){e_x();var e_H=e_d.getCoords(e_o),e_I=e_d.getEventAbsPos(e_G);e_l.e_j(e_w(e_v(e_l.get('minValue'))+e_y((e_q?e_I.top:e_I.left)-e_u[e_q]/2*(1-e_q*2)-(e_q?e_H.bottom:e_H.x))));return e_C.initiate(e_G);}};e_l.wireNode([e_o,'full','empty'],{mousedown:e_F,touchstart:e_F});e_a.doMy(e_l,'wireUi');}};e_f.presets={};e_f.stateProperties({e_E:{name:'inDrag',value:e_c},e_n:{name:'restTime',value:250},e_w:{name:'valueFunc',value:function(e_J){return e_J}}});return e_f;}});