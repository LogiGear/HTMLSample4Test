/*
	UIZE JAVASCRIPT FRAMEWORK

	http://www.uize.com/reference/Uize.Widget.FormElement.Text.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.FormElement.Text',required:'Uize.Node',builder:function(d_a){'use strict';var d_b=typeof document!='undefined'&&'placeholder'in document.createElement('input');var d_c=d_a.subclass(null,function(){var d_d=this;d_d.wire('Changed.focused',function(){if(d_d.isWired){var d_e=d_d.get('focused'),d_f=d_d.d_f;if(d_f&& !d_b){var d_g,d_h=d_d.get('value');if(d_e&&d_h==d_f)d_g='';else if(!d_e&& !d_h)d_g=d_f;d_g!=undefined&&d_d.setNodeValue('input',d_g);}if(d_e){var d_i=d_d.getNode('input'),d_j=d_d.getNodeValue(d_i),d_k=d_j?d_j.length:0;if(d_k>0){if(d_i.createTextRange){var d_l=d_i.createTextRange();d_l.move('character',d_k);d_l.select();}else if(d_i.setSelectionRange)d_i.setSelectionRange(d_k,d_k);}}}});d_d.d_m();}),d_n=d_c.prototype;d_n.d_m=function(){var d_d=this;d_d.d_o=[function(d_h){var d_p=d_h+'',d_k=d_h!=null?d_p.length:0;return d_k>=d_d.d_q&&d_k<=d_d.d_r;}];};d_n.d_s=function(){this.isWired&&d_b&&this.setNodeProperties('input',{placeholder:this.d_f})};d_n.checkIsEmpty=function(){
return d_a.doMy(this,'checkIsEmpty')||this.get('value')==this.d_f};d_n.getCaretPosition=function(){var d_d=this,d_t=d_d.getNode('input');if(d_d.isWired&&d_d.get('focused')){if(Uize.Node.isIe){var d_u=document.selection.createRange();d_u.moveStart('character',-d_d.get('tentativeValue').length);return d_u.text.length;}else{return d_t.selectionStart;}}else{return-1;}};d_n.setCaretPosition=function(d_v){var d_d=this,d_t=d_d.getNode('input');if(d_d.isWired&&d_d.get('focused')){if(Uize.Node.isIe){var d_l=d_t.createTextRange();d_l.collapse(true);d_l.moveEnd('character',d_v);d_l.moveStart('character',d_v);d_l.select();}else d_t.setSelectionRange(d_v,d_v);}};d_n.getMoreValidators=function(){return this.d_o};d_n.updateUi=function(){if(this.isWired){this.d_s();d_a.doMy(this,'updateUi');}};d_n.wireUi=function(){var d_d=this;if(!d_d.isWired){var d_f=d_d.d_f,d_t=d_d.getNode('input');if(d_f){if(d_b)d_d.setNodeProperties(d_t,{placeholder:d_f});else d_d.set('value',d_f);}d_a.doMy(d_d,'wireUi');}};d_c.stateProperties({d_f:{
name:'placeholder|defaultValue',onChange:d_n.d_s,value:''},d_q:{name:'minLength',onChange:d_n.d_m,value:0},d_r:{name:'maxLength',onChange:d_n.d_m,value:32767}});return d_c;}});