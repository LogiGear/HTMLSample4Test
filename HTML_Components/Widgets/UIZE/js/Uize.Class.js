/*
	UIZE JAVASCRIPT FRAMEWORK

	http://www.uize.com/reference/Uize.Class.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Class',builder:function(a_a){'use strict';var a_b,a_c='string',a_d='object',a_e=Function,a_f=Uize,a_g=a_f.clone,a_h=a_f.copyInto,a_i=a_f.forEach,a_j=a_f.map,a_k=a_f.lookup,a_l=a_f.getClass,a_m=a_f.getGuid,a_n=a_f.eval,a_o=a_f.isArray,a_p=a_f.isFunction,a_q=a_f.isInstance,a_r=a_f.isObject,a_s=a_f.noNew,a_t=a_f.pairUp;var a_u=[],a_v={},a_w=1,a_x=2;var a_y=a_z(function(){},function(){this.instanceId=a_m();},function(a_A){a_A||(a_A=a_v);var a_B={},a_C=this.Class.a_C,a_D,a_E;for(a_D in a_C){if(a_D in a_A)a_B[a_D]=a_A[a_D];else if((a_E=a_C[a_D])!==a_b)a_B[a_D]=a_E;}for(a_D in a_A)a_D in a_B||(a_B[a_D]=a_A[a_D]);this.set(a_B);}),a_F=a_y.prototype,a_G=a_y.nonInheritableStatics;function a_H(a_I,a_J){var a_y=a_l(a_I);return(a_y.a_K[a_J]||a_y.a_L[a_J]);}function a_M(a_I,a_J){var a_N=a_H(a_I,a_J);return a_N?a_N.a_O:a_J;}a_y.a_P=a_F.a_P=function(a_Q,a_R){if(a_Q.charCodeAt(0)==67&& !a_Q.indexOf('Changed.')){var a_I=this,a_S=a_Q.slice(8),a_N=a_H(a_I,a_S);if(a_N&&a_S!=a_N.a_T)
a_Q='Changed.'+(a_S=a_N.a_T);a_R(a_Q);(a_I.a_U||(a_I.a_U={}))[a_S]=a_I.a_V&&a_I.a_V[a_Q];}else{a_R(a_Q);}};a_y.wire=a_F.wire=function(a_W,a_X){var a_I=this;if(arguments.length==2){a_I.a_P(a_W,function(a_Q){var a_V=a_I.a_V||(a_I.a_V={});(a_V[a_Q]||(a_V[a_Q]=[])).push({a_Q:a_Q,a_X:a_p(a_X)?a_X:typeof a_X==a_c?a_e(a_X):function(a_Y){a_X.fire(a_Y)},a_Z:a_X});});}else if(a_r(a_W)){for(var a_Q in a_W)this.wire(a_Q,a_W[a_Q]);}};a_y.fire=a_F.fire=function(a_Y){if(typeof a_Y!=a_d)a_Y={name:a_Y};var a_I=this,a_V=a_I.a_V;if(a_V){var a_0=a_V[a_Y.name],a_1=a_V['*'];if(a_0||a_1){a_Y.source||(a_Y.source=a_I);var a_2=a_1&&a_0?a_1.concat(a_0):a_1||a_0,a_3=a_2.length;if(a_3==1){a_2[0].a_X(a_Y);}else if(a_3==2){var a_4=a_2[0].a_X,a_5=a_2[1].a_X;a_4(a_Y);a_5(a_Y);}else{if(!a_1|| !a_0)a_2=a_2.concat();for(var a_6= -1;++a_6<a_3;)a_2[a_6].a_X(a_Y);}}}if(a_Y.bubble&&a_I.parent&&a_q(a_I)){a_Y.source||(a_Y.source=a_I);a_I.parent.fire(a_Y);}return a_Y;};a_y.unwire=a_F.unwire=function(a_W,a_X){var a_I=this,a_V=a_I.a_V;if(a_V){
if(a_r(a_W)){for(var a_Q in a_W)a_I.unwire(a_Q,a_W[a_Q]);}else{a_I.a_P(a_W,function(a_Q){var a_7=a_V[a_Q];if(a_7){if(a_X){for(var a_6=a_7.length;--a_6>=0;)a_7[a_6].a_Z==a_X&&a_7.splice(a_6,1);}(a_X&&a_7.length)||delete a_V[a_Q];}});}}};var a_8={};function a_9(a_ba){var a_bb=a_ba+'',a_bc=a_8[a_bb];function a_bd(a_be){return a_be.replace(/\s+/g,'').split(',');}if(!a_bc){var a_bf,a_bg;if(a_p(a_ba)){a_bf=a_bd((a_ba+'').match(/\(([^\)]*)\)/)[1]);a_bg=a_ba;}else{if(typeof a_ba=='string'){var a_bh=a_ba.indexOf(':');if(a_bh> -1){a_bg=a_e(a_bf=a_bd(a_ba.slice(0,a_bh)),'return '+a_ba.slice(a_bh+1));}else{a_ba=a_bd(a_ba);}}if(a_o(a_ba)){a_bf=[];if(a_ba.length){var a_bi=[],a_bj=[];a_i(a_ba,function(a_bk,a_bl){var a_bm=a_bk.charCodeAt(0)==33,a_bn='a'+a_bl;a_bf.push(a_bm?a_bk.slice(1):a_bk);a_bi.push(a_bn);a_bj.push((a_bm?'!':'')+a_bn);});a_bg=a_e(a_bi,'return '+a_bj.join(' && '));}else{a_bg=a_f.returnTrue;}}}a_bc=a_8[a_bb]={a_bf:a_bf,a_bo:a_e('return ['+a_j(a_bf,'"this.get(\'" + value + "\')"').join(',')+']'),a_bg:a_bg,
a_bp:a_j(a_bf,'"Changed." + value')};}return a_bc;}a_F.a_bq=function(a_ba,a_X,a_br){var a_I=this,a_bs=a_br==a_w,a_bt=a_br==a_x,a_ba=a_9(a_ba),a_bo=a_ba.a_bo,a_bg=a_ba.a_bg,a_bu={},a_bv=a_bu,a_bw;function a_bx(){var a_by=a_bo.call(a_I),a_bz=a_bg.apply(0,a_by);if(a_bv==a_bu||a_bz!=a_bv){a_bs&&a_bz&&a_bw&&a_I.unwire(a_bw);(a_bs||a_bt)?a_bz&&(a_bs|| !a_bz!= !a_bv)&&a_X.apply(0,a_by):a_X.call(0,a_bz,a_by);a_bv=a_bz;}}a_bx();a_bs&&a_bv?(a_bw={}):a_I.wire(a_bw=a_k(a_ba.a_bp,a_bx));return a_bw;};a_F.onChange=function(a_bA,a_X){return this.a_bq(a_bA,a_X);};a_F.once=function(a_bA,a_X){return this.a_bq(a_bA,a_X,a_w);};a_F.whenever=function(a_bA,a_X){return this.a_bq(a_bA,a_X,a_x);};a_F.is=function(a_D){return!!this[a_M(this,a_D)];};a_F.met=function(a_bB){this.set(a_bB,true);};a_F.unmet=function(a_bB){this.set(a_bB,false);};a_F.isMet=function(a_bA){var a_ba=a_9(a_bA);return a_ba.a_bg.apply(0,a_ba.a_bo.call(this));};a_y.get=a_F.get=function(a_D){if(typeof a_D==a_c){return this[a_M(this,a_D)];}else{var a_I=this,a_bC={};
if(!a_D){var a_y=a_l(a_I),a_L=a_y.a_L;for(var a_bD in a_L)a_bC[a_L[a_bD].a_T]=a_I[a_bD];if(a_q(a_I)){var a_bE=a_I.a_bE;if(a_bE)for(a_D in a_bE)a_bC[a_D]=a_I[a_D];}}else if(a_o(a_D)){for(var a_bF= -1,a_bG=a_D.length;++a_bF<a_bG;){var a_bH=a_D[a_bF];a_bC[a_bH]=a_I[a_M(a_I,a_bH)];}}else{for(var a_bH in a_D)a_bC[a_bH]=a_I[a_M(a_I,a_bH)];}return a_bC;}};a_y.stateProperties=a_y.registerProperties=function(a_bI){var a_I=this,a_L=a_I.a_L,a_K=a_I.a_K;for(var a_bD in a_bI){var a_bJ=a_bI[a_bD],a_bK=a_r(a_bJ),a_S=(a_bK?a_bJ.name:a_bJ)||a_bD,a_bL=a_S,a_N=a_L[a_bD]={a_O:a_bD};if(a_S.indexOf('|')> -1){var a_bM=a_S.split('|');a_bL=a_bM[0];a_k(a_bM,a_N,a_K);}else{a_K[a_S]=a_N;}a_N.a_T=a_bL;if(a_bK){if(a_bJ.onChange)a_N.a_bq=a_bJ.onChange;if(a_bJ.conformer)a_N.a_bN=a_bJ.conformer;a_I[a_bD]=a_bJ.value;}}a_I.a_C=this.get();};a_y.set=a_F.set=function(a_A){var a_bO=arguments,a_bP=a_bO.length;if(a_bP>1)a_A=a_bP>2||typeof a_A==a_c?a_t.apply(0,a_bO):a_k(a_A,a_bO[1]);var a_I=this,a_bQ=a_q(a_I),a_y=a_bQ?a_I.Class:a_I,a_K=a_y.a_K,
a_L=a_y.a_L,a_N,a_bR,a_bS,a_bT,a_U=a_bQ&&a_I.a_U,a_bU=a_U&&a_U['*'],a_bV,a_bW,a_bD,a_S,a_bX,a_bY,a_bZ;for(var a_J in a_A){a_bY=a_A[a_J];if(a_N=a_K[a_J]||a_L[a_J]){a_bD=a_N.a_O;a_S=a_N.a_T;}else{a_bD=a_S=a_J;a_N=a_bQ?{}:{value:a_bY};a_bQ?((a_I.a_bE||(a_I.a_bE={}))[a_J]=true):((a_bX||(a_bX={}))[a_J]=a_N);}if(a_bQ)(a_bZ||(a_bZ={}))[a_S]=a_N.a_bN?(a_bY=a_N.a_bN.call(a_I,a_bY,a_I[a_bD])):a_bY;if(a_bY!==a_I[a_bD]){if(a_bQ){a_bU&&((a_bV||(a_bV={}))[a_S]=a_bY);a_U&&a_U[a_S]&&(a_bW||(a_bW=[])).push(a_S);var a_b0=function(a_bT){if(a_p(a_bT)){if(!a_bR){a_bR=[];a_bS=a_I.instanceId+'_handlerAlreadyAdded';}if(!a_bT[a_bS]){a_bT[a_bS]=1;a_bR.push(a_bT);}}else if(typeof a_bT==a_c){a_b0(a_I[a_bT]);}else if(a_o(a_bT)){a_i(a_bT,a_b0);}};a_N.a_bq&&a_b0(a_N.a_bq);}a_I[a_bD]=a_bY;}}a_bX&&a_y.stateProperties(a_bX);if(a_bQ){if(a_bR){for(var a_6= -1,a_b1=a_bR.length;++a_6<a_b1;){delete(a_bT=a_bR[a_6])[a_bS];a_bT.call(a_I,a_bZ);}}a_bV&&a_I.fire({name:'Changed.*',properties:a_bV});if(a_bW){for(var a_b2= -1,a_b3=a_bW.length;++a_b2<a_b3;)
a_I.fire('Changed.'+a_bW[a_b2]);}}else{a_y.a_C=this.get();}};a_y.toggle=a_F.toggle=function(a_b4){var a_b5= !this.get(a_b4);this.set(a_b4,a_b5);return a_b5;};a_F.kill=function(){var a_b6=this.instanceId;a_n('if(typeof '+a_b6+'!=\'undefined\')'+a_b6+'=null');};function a_z(a_y,a_b7,a_b8){function a_b9(){var a_ca=[],a_cb=a_f.toString;a_i(this.get(),function(a_bY,a_b4){a_ca.push(a_b4+' : '+(a_bY&&(a_q(a_bY)||a_p(a_bY))?a_cb.call(a_bY):a_bY));});return a_cb.call(this)+'\n\n'+a_ca.sort().join('\n');}function a_cc(){return this[a_M(this,'value')];}var a_F=a_y.prototype,a_cd=a_s(function(){for(var a_ce= -1,a_cf=a_cg.length;++a_ce<a_cf;)a_cg[a_ce].apply(this,arguments);for(var a_ch= -1,a_ci=a_cj.length;++a_ch<a_ci;)a_cj[a_ch].apply(this,arguments);}),a_ck=a_cd.prototype;var a_bY,a_cl=a_y.nonInheritableStatics||a_v;for(var a_D in a_y)if(!a_cl[a_D]&&(a_bY=a_y[a_D])!=a_F&& !(a_p(a_bY)&&a_bY.moduleName&&/[A-Z]/.test(a_D.charAt(0))))a_cd[a_D]=a_g(a_bY);a_h(a_ck,a_F);a_ck.toString=a_b9;a_ck.valueOf=a_cc;a_ck.Class=a_cd;
a_cd.nonInheritableStatics={a_cm:1,nonInheritableStatics:1,toString:0,valueOf:0};a_cd.superclass=a_y;a_cd.toString=a_b9;a_cd.valueOf=a_cc;var a_cg=a_cd.a_cg=(a_y.a_cg||a_u).concat(),a_cj=a_cd.a_cj=(a_y.a_cj||a_u).concat();(a_cd.a_b7=a_b7)&&a_cg.push(a_b7);(a_cd.a_b8=a_b8)&&a_cj.push(a_b8);a_cd.a_L||(a_cd.a_L={});a_cd.a_K||(a_cd.a_K={});return a_cd;};a_y.doMy=function(a_cn,a_co,a_bO){return this.prototype[a_co].apply(a_cn,a_bO||a_u);};a_y.subclass=function(a_cp,a_cq){var a_cd;if(arguments.length==1&& !a_p(a_cp)){(a_cd=a_z(this)).declare(a_cp);}else{a_cd=a_z(this,a_cp,a_cq);}return a_cd;};a_y.singleton=function(a_cr,a_A){var a_cm=this.a_cm||(this.a_cm={}),a_cs=a_cm[a_cr||(a_cr='')];a_cs?a_A&&a_cs.set(a_A):(a_cs=a_cm[a_cr]=this(a_A));return a_cs;};a_y.instanceMethods=a_y.instanceProperties=function(a_ct){a_h(this.prototype,a_ct);};a_y.staticMethods=a_y.staticProperties=function(a_cu){a_h(this,a_cu);};a_y.dualContextMethods=a_y.dualContextProperties=function(a_cv){a_h(this,a_cv);a_h(this.prototype,a_cv);};
a_y.alphastructor=function(a_b7){this.a_b7&&this.a_cg.length--;(this.a_b7=a_b7)&&this.a_cg.push(a_b7);};a_y.omegastructor=function(a_b8){this.a_b8&&this.a_cj.length--;(this.a_b8=a_b8)&&this.a_cj.push(a_b8);};a_y.declare=function(a_cw){if(a_cw)for(var a_cx in a_cw)a_p(this[a_cx])&&this[a_cx](a_cw[a_cx]);};return a_y;}});